const crypto = require('crypto');
const puppeteer = require('puppeteer');

const TIMEOUT = 2*60*1000;
const FLAG = process.env?.FLAG || "flag{meow}";
const host = `http://localhost:${parseInt(process.env?.PORT || "3000")}`;

async function xssbot(url) {
  console.log("Launching browser");
  const browser = await puppeteer.launch({
      args: [
          '--headless',
          '--disable-dev-shm-usage',
          '--no-sandbox',
          '--disable-setuid-sandbox',
          '--disable-gpu',
          '--no-gpu',
          '--disable-default-apps',
          '--disable-translate',
          '--disable-device-discovery-notifications',
          '--disable-software-rasterizer',
      ],
      // headless:false,
  });

  setTimeout(() => {
    try {
      browser.close();
    } catch (err) {
      console.log(`Error: ${err}`);
    }
  }, TIMEOUT);

  console.log(`Creating account`);
  const context = await browser.createBrowserContext();
  const page = await context.newPage();
  await page.goto(`${host}/login`);
  await page.waitForSelector('[name=username]');
  await page.type('[name=username]', crypto.randomBytes(8).toString('hex'));
  await page.type('[name=password]', crypto.randomBytes(8).toString('hex'));
  await page.click('[value="Sign up"]');
  await page.waitForNavigation();

  console.log(`Setting flag`);
  await page.goto(`${host}/account`);
  await page.waitForSelector('#loadPrivate');
  await page.click('#loadPrivate');
  await page.evaluate(function(){
      document.querySelectorAll('[src*=cat_]').forEach(e=>e.onmousedown());
      document.querySelector('.captcha button').click();
  });

  await new Promise(resolve => setTimeout(resolve, 2000));
  await page.waitForSelector('input');
  await page.type('input', FLAG);
  await new Promise(resolve => setTimeout(resolve, 2000));

  console.log(`Visiting chat`);
  try {
    await page.goto(`${host}/`);
    await new Promise(resolve => setTimeout(resolve, 2000));
    await page.evaluate(() => {
      // hook chatbot
      const oldAddChatMessage = addChatMessage;
      addChatMessage = (msg) => {
        oldAddChatMessage(msg);
        if (msg.includes("!admin")) return location = "about:blank";
        if (msg.startsWith(`<${username}>`)) return;
        let reply = ``;
        const SONG_LINKS = ["https://ninajirachi.bandcamp.com/track/fuck-my-computer-2","https://seekingglacier.bandcamp.com/track/totem-dance","https://scraton.bandcamp.com/track/hear-no-evil","https://3kliksphilip.bandcamp.com/track/atomic-amnesia-mmxx-reversed","https://dilla.bandcamp.com/track/mash-2","https://dilla.bandcamp.com/track/bye","https://megarex-jp.bandcamp.com/track/aimee-feat","https://blacksquares.bandcamp.com/track/princess-breath","https://belgerum.bandcamp.com/track/forgotten-remastered-bonus-track","https://blackdresses.bandcamp.com/track/sharp-halo","https://ninajirachi.bandcamp.com/track/london-song","https://artbyform.bandcamp.com/track/nests-fractures","https://dilla.bandcamp.com/track/welcome-to-the-show","https://vincekaichan.bandcamp.com/track/hometown-dreams","https://radiarc.bandcamp.com/track/cowardice","https://artbyform.bandcamp.com/track/heal","https://artbyform.bandcamp.com/track/littlecrush","https://dilla.bandcamp.com/track/people","https://blacksquares.bandcamp.com/track/dragons-arent-supposed-2-b-cute-right","https://aekasora.bandcamp.com/track/summertime-vibes","https://boardsofcanada.bandcamp.com/track/corsair","https://boardsofcanada.bandcamp.com/track/diving-station","https://vyletpony.bandcamp.com/track/ghostie-dub-here-to-light-this-up-outro-bonus-track","https://boardsofcanada.bandcamp.com/track/the-devil-is-in-the-details","https://yourenigma.bandcamp.com/track/maybe-in-michigan-feat-sprocket","https://artbyform.bandcamp.com/track/storm-shanty-ft-scurvy-dawg","https://dilla.bandcamp.com/track/time-the-donut-of-the-heart","https://100gecs.bandcamp.com/track/ringtone","https://blackdresses.bandcamp.com/track/bliss-and-stupidity","https://3kliksphilip.bandcamp.com/track/atomic-amnesia-mmxx","https://underscores.bandcamp.com/track/spoiled-little-brat","https://vyletpony.bandcamp.com/track/love-ponystep-ft-tracey-brakes","https://artbyform.bandcamp.com/track/spice","https://dilla.bandcamp.com/track/stop","https://vyletpony.bandcamp.com/track/ch-2-xpr-50-its-all-about-the-game-ft-lenval-brown","https://blackdresses.bandcamp.com/track/damage-suppressor","https://3kliksphilip.bandcamp.com/track/atomic-amnesia-mmxx-x2","https://radiarc.bandcamp.com/track/i-know","https://artbyform.bandcamp.com/track/connecting","https://dilla.bandcamp.com/track/the-new-2","https://purityfilter.bandcamp.com/track/blight-apoptosis","https://steventhedreamer.bandcamp.com/track/jupiter-eight","https://underscores.bandcamp.com/track/cctv","https://karnaboy.bandcamp.com/track/caster","https://dilla.bandcamp.com/track/donuts-outro-2","https://artbyform.bandcamp.com/track/6fingerdeathpunch","https://blackdresses.bandcamp.com/track/impossible-dream","https://artbyform.bandcamp.com/track/dead-end-station","https://jackstauber.bandcamp.com/track/buttercup","https://posy.bandcamp.com/track/sounds-from-the-library","https://infloresce.bandcamp.com/track/jan-gyulum","https://trndytrndy.bandcamp.com/track/discovery-virtua-theme","https://hitnex.bandcamp.com/track/vicious-heroism-traitor-version","https://vyletpony.bandcamp.com/track/beautysleep-ft-r3ctifier-namii","https://boardsofcanada.bandcamp.com/track/magic-window","https://artbyform.bandcamp.com/track/omega-3-fatty-acids","https://yourenigma.bandcamp.com/track/hey-jimi","https://hitnex.bandcamp.com/track/super-memories-x-feat-hitnex-x","https://vyletpony.bandcamp.com/track/jester","https://artbyform.bandcamp.com/track/hydropunk","https://aekasora.bandcamp.com/track/the-jaffa-orange","https://underscores.bandcamp.com/track/northwest-zombie-girl","https://cheraxdestructor.bandcamp.com/track/cupcake-2","https://artbyform.bandcamp.com/track/all-night","https://ninajirachi.bandcamp.com/track/ipod-touch-2","https://posy.bandcamp.com/track/segments-song","https://boardsofcanada.bandcamp.com/track/a-is-to-b-as-b-is-to-c","https://patriciataxxon.bandcamp.com/track/big-wheel","https://underscores.bandcamp.com/track/johnny-johnny-johnny-1","https://vyletpony.bandcamp.com/track/lightning-bolt","https://steventhedreamer.bandcamp.com/track/space-travel","https://steventhedreamer.bandcamp.com/track/synchobonk","https://underscores.bandcamp.com/track/cops-and-robbers-2","https://ninajirachi.bandcamp.com/track/all-at-once","https://dorianelectra.bandcamp.com/track/edgelord-feat-rebecca-black","https://blacksquares.bandcamp.com/track/fun-fun-fun-ft-sogreatandpowerful","https://artbyform.bandcamp.com/track/nuale","https://belgerum.bandcamp.com/track/penumbras-echo-bonus-track","https://karnaboy.bandcamp.com/track/cycles","https://infloresce.bandcamp.com/track/cerebra-borealis","https://trndytrndy.bandcamp.com/track/world-map","https://underscores.bandcamp.com/track/shoot-to-kill-kill-your-darlings-1","https://vyletpony.bandcamp.com/track/creature-city","https://trndytrndy.bandcamp.com/track/meteorological-centre","https://blackdresses.bandcamp.com/track/maybe-this-world-is-another-planets-hell","https://infloresce.bandcamp.com/track/metrosideros","https://artbyform.bandcamp.com/track/moovon","https://hitnex.bandcamp.com/track/glitched-character","https://vyletpony.bandcamp.com/track/walking-beside-a-dragonfly-ft-lunari-lotus","https://underscores.bandcamp.com/track/seventyseven-dog-years-1","https://dilla.bandcamp.com/track/geek-down-2","https://radiarc.bandcamp.com/track/temptation","https://dorianelectra.bandcamp.com/track/gentleman-2","https://artbyform.bandcamp.com/track/into-the-stars","https://infloresce.bandcamp.com/track/northern-lands","https://underscores.bandcamp.com/track/the-fish-song","https://artbyform.bandcamp.com/track/follow-me","https://underscores.bandcamp.com/track/del-mar-county-fair-2008-w-maxwell-young","https://artbyform.bandcamp.com/track/starfaced","https://soundbandit.bandcamp.com/track/you-must-shine","https://artbyform.bandcamp.com/track/back-off","https://hitnex.bandcamp.com/track/crunchy-crown-coaster","https://artbyform.bandcamp.com/track/baile-gods-and-one-goddess","https://artbyform.bandcamp.com/track/grabbing-some-fallen-twigs","https://acloudyskye.bandcamp.com/track/float","https://vyletpony.bandcamp.com/track/a-digital-flower-field","https://ninajirachi.bandcamp.com/track/sing-good","https://dorianelectra.bandcamp.com/track/f-the-world-feat-the-garden-quay-dash-d0llywood1","https://artbyform.bandcamp.com/track/the-choir-before-the-storm","https://vyletpony.bandcamp.com/track/facing-oblivion-to-become-the-lode-star","https://osno1.bandcamp.com/track/darkest-part-of-day","https://radiarc.bandcamp.com/track/anteclipse","https://patriciataxxon.bandcamp.com/track/lazy-saturday-sun","https://artbyform.bandcamp.com/track/epoch","https://hitnex.bandcamp.com/track/endless-adventure","https://dilla.bandcamp.com/track/u-love-2","https://marumaru.bandcamp.com/track/sound-sky","https://ninajirachi.bandcamp.com/track/all-i-am-2","https://radiarc.bandcamp.com/track/sunset-volcano","https://kraejiyaeji.bandcamp.com/track/after-that","https://boardsofcanada.bandcamp.com/track/1969","https://o0o0o0o0.bandcamp.com/track/water-fairy-moon","https://vyletpony.bandcamp.com/track/ch-3-ballista-dear-aria-i-love-myself-ft-lenval-brown","https://trndytrndy.bandcamp.com/track/idea-for-song","https://posy.bandcamp.com/track/dancing-dollies","https://artbyform.bandcamp.com/track/boundless","https://infloresce.bandcamp.com/track/submerged-descent","https://vyletpony.bandcamp.com/track/ch-4-dsr-50-o-laniakea-quell-not-the-love-which-overflows-from-me-ft-lenval-brown","https://artbyform.bandcamp.com/track/wet-alvin","https://vyletpony.bandcamp.com/track/dual-headed-hydranoid-ft-namii-sadistictushi","https://belgerum.bandcamp.com/track/darkness-sonata","https://patriciataxxon.bandcamp.com/track/boys","https://artbyform.bandcamp.com/track/wrong-idea","https://patriciataxxon.bandcamp.com/track/brotherhood","https://coconeru.bandcamp.com/track/thanks-vinyl-thank-you-octavia","https://blackdresses.bandcamp.com/track/mirrorgirl","https://acloudyskye.bandcamp.com/track/innards","https://belgerum.bandcamp.com/track/march-of-tides","https://hitnex.bandcamp.com/track/revolver-churros-feat-dj-genki","https://orangemilkrecords.bandcamp.com/track/hazer-feat-ada-rook","https://artbyform.bandcamp.com/track/dreamer","https://posy.bandcamp.com/track/alright-then","https://artbyform.bandcamp.com/track/protector","https://kraejiyaeji.bandcamp.com/track/drink-im-sippin-on","https://artbyform.bandcamp.com/track/its-gotta-be-lightning","https://artbyform.bandcamp.com/track/healing","https://dilla.bandcamp.com/track/hi-2","https://belgerum.bandcamp.com/track/dawns-advent","https://acloudyskye.bandcamp.com/track/basin","https://dilla.bandcamp.com/track/stepson-of-the-clapper-2","https://boardsofcanada.bandcamp.com/track/in-the-annexe","https://infloresce.bandcamp.com/track/night-dryad","https://orangemilkrecords.bandcamp.com/track/organizational-rot","https://artbyform.bandcamp.com/track/dark-curtains-that-dont-block-a-whole-lot-of-light","https://trndytrndy.bandcamp.com/track/minimal-beat","https://boardsofcanada.bandcamp.com/track/beware-the-friendly-stranger","https://seekingglacier.bandcamp.com/track/we-belong-right-here","https://karnaboy.bandcamp.com/track/fairydance","https://purityfilter.bandcamp.com/track/blight-downburst","https://orangemilkrecords.bandcamp.com/track/hail-sound","https://artbyform.bandcamp.com/track/forget-me-not","https://dilla.bandcamp.com/track/gobstopper","https://cheraxdestructor.bandcamp.com/track/cupcake-cxdr-edit","https://karnaboy.bandcamp.com/track/flamedreams","https://hitnex.bandcamp.com/track/endless-adventure-usao-remix","https://dorianelectra.bandcamp.com/track/monk-mode-interlude-feat-gaylord","https://artbyform.bandcamp.com/track/crystal-grotto","https://patriciataxxon.bandcamp.com/track/where-do-i-go-now","https://orangemilkrecords.bandcamp.com/track/permanently-closed","https://dilla.bandcamp.com/track/one-for-ghost-2","https://jackstauber.bandcamp.com/track/dog-nightmare","https://infloresce.bandcamp.com/track/mirror-flower","https://dilla.bandcamp.com/track/anti-american-graffiti","https://orangemilkrecords.bandcamp.com/track/mansions-no-one-wants-to-buy-for-any-price","https://karnaboy.bandcamp.com/track/dance-with-you","https://kraejiyaeji.bandcamp.com/track/full-of-it","https://trndytrndy.bandcamp.com/track/gay-nightcore","https://artbyform.bandcamp.com/track/roundabout","https://jackstauber.bandcamp.com/track/candy-eyes","https://patriciataxxon.bandcamp.com/track/furry","https://soundbandit.bandcamp.com/track/make-something","https://steventhedreamer.bandcamp.com/track/electronic-voluntary","https://artbyform.bandcamp.com/track/timelapse","https://blackdresses.bandcamp.com/track/beautiful-friendship","https://aekasora.bandcamp.com/track/changes","https://kraejiyaeji.bandcamp.com/track/feelings-change","https://posy.bandcamp.com/track/thats-okay-darling","https://scraton.bandcamp.com/track/what-used-to-be","https://dorianelectra.bandcamp.com/track/mlady-2","https://dorianelectra.bandcamp.com/track/sorry-bro-i-love-you-2","https://vyletpony.bandcamp.com/track/in-the-name-of-friendship","https://boardsofcanada.bandcamp.com/track/energy-warning","https://orangemilkrecords.bandcamp.com/track/narrow-down-concepts-force-meaning","https://boardsofcanada.bandcamp.com/track/dandelion","https://blackdresses.bandcamp.com/track/creep-u","https://artbyform.bandcamp.com/track/nowhere-fast","https://purityfilter.bandcamp.com/track/blight-essence-shift","https://ninajirachi.bandcamp.com/track/its-you","https://underscores.bandcamp.com/track/duhhhhhhhhhhhhhhhhh-1","https://acloudyskye.bandcamp.com/track/spill-2","https://megarex-jp.bandcamp.com/track/your-voice-so-feat-such","https://artbyform.bandcamp.com/track/you-know-like-those-1970s-cia-experiments-on-civilians-ft-fearozzles","https://jackstauber.bandcamp.com/track/i-love-you-verne-troyer","https://vincekaichan.bandcamp.com/track/by-the-fireplace","https://seekingglacier.bandcamp.com/track/not-rly","https://orangemilkrecords.bandcamp.com/track/halt-draft","https://artbyform.bandcamp.com/track/wander","https://underscores.bandcamp.com/track/bozo-bozo-bozo","https://o0o0o0o0.bandcamp.com/track/snow-elves","https://vincekaichan.bandcamp.com/track/soul-trekker","https://radiarc.bandcamp.com/track/circumstance","https://patriciataxxon.bandcamp.com/track/i-do","https://vyletpony.bandcamp.com/track/sacred-dragon","https://vyletpony.bandcamp.com/track/comet-catcher-and-the-reek-fish","https://hitnex.bandcamp.com/track/invisible-frenzy-genuine-version","https://belgerum.bandcamp.com/track/threnody-of-night","https://patriciataxxon.bandcamp.com/track/frat-claws","https://dorianelectra.bandcamp.com/track/ram-it-down-feat-mood-killer-lil-mariko-lil-texas","https://vyletpony.bandcamp.com/track/potion-seller","https://seekingglacier.bandcamp.com/track/pining","https://dilla.bandcamp.com/track/lightworks-2","https://boardsofcanada.bandcamp.com/track/dawn-chorus","https://infloresce.bandcamp.com/track/overpass-night-air","https://underscores.bandcamp.com/track/dry-land-2001-feat-knapsack","https://dilla.bandcamp.com/track/the-twister-huh-what-2","https://yourenigma.bandcamp.com/track/it-comes-in-waves","https://soundbandit.bandcamp.com/track/fun-to-pretend","https://underscores.bandcamp.com/track/where-did-you-fall","https://steventhedreamer.bandcamp.com/track/henry-vlll","https://seekingglacier.bandcamp.com/track/enfold","https://artbyform.bandcamp.com/track/rain-god","https://scraton.bandcamp.com/track/see-you-in-my-dreams","https://vyletpony.bandcamp.com/track/musicians-of-ponyville-horse-friends-pt-3-return-of-the-dreaded-vy-scratch","https://o0o0o0o0.bandcamp.com/track/underwater-fireflies","https://karnaboy.bandcamp.com/track/alone","https://artbyform.bandcamp.com/track/nacreous","https://aekasora.bandcamp.com/track/one-day-in-japan","https://100gecs.bandcamp.com/track/i-need-help-immediately","https://boardsofcanada.bandcamp.com/track/opening-the-mouth","https://aekasora.bandcamp.com/track/helpless-as-a-kitten","https://infloresce.bandcamp.com/track/winter-island","https://megarex-jp.bandcamp.com/track/tumbling-feat-renko","https://radiarc.bandcamp.com/track/6pm","https://artbyform.bandcamp.com/track/emotional-clap","https://artbyform.bandcamp.com/track/the-language-of-energy","https://marumaru.bandcamp.com/track/may-we-never-get-better","https://underscores.bandcamp.com/track/stupid-can-t-run-from-the-urge","https://trndytrndy.bandcamp.com/track/your-notebook","https://ninajirachi.bandcamp.com/track/-","https://underscores.bandcamp.com/track/70","https://artbyform.bandcamp.com/track/if-its-the-last-thing-i-do","https://marumaru.bandcamp.com/track/a-fever-dream","https://aekasora.bandcamp.com/track/house-of-dreams","https://100gecs.bandcamp.com/track/xxxi-wud-nvrst-p-xxx","https://artbyform.bandcamp.com/track/stargazer-ft-hiraeth-ink","https://kraejiyaeji.bandcamp.com/track/noonside","https://100gecs.bandcamp.com/track/gecgecgec","https://scraton.bandcamp.com/track/grunts-and-barks","https://artbyform.bandcamp.com/track/you-me","https://vyletpony.bandcamp.com/track/falling-in-love-with-a-corporate-illustration","https://100gecs.bandcamp.com/track/money-machine","https://radiarc.bandcamp.com/track/mother-nature","https://artbyform.bandcamp.com/track/ixs-shadow","https://steventhedreamer.bandcamp.com/track/mexican-bandit","https://trndytrndy.bandcamp.com/track/pangea-wide-open-sea","https://vyletpony.bandcamp.com/track/worst-rave-ever","https://kraejiyaeji.bandcamp.com/track/raingurl","https://ninajirachi.bandcamp.com/track/infohazard","https://blacksquares.bandcamp.com/track/yellow-horse","https://orangemilkrecords.bandcamp.com/track/debtors-prison-click-here-disney-needs-to-see-this","https://yourenigma.bandcamp.com/track/plastic-smile-instrumental","https://artbyform.bandcamp.com/track/you-better-run","https://dilla.bandcamp.com/track/the-factory","https://dilla.bandcamp.com/track/airworks-2","https://artbyform.bandcamp.com/track/so-be-it","https://artbyform.bandcamp.com/track/ascension","https://vyletpony.bandcamp.com/track/the-slow-dance","https://blacksquares.bandcamp.com/track/princess-lunas-glorious-grilled-cheese-sandwiches","https://dilla.bandcamp.com/track/one-eleven","https://flumemusic.bandcamp.com/track/the-difference-feat-toro-y-moi","https://acloudyskye.bandcamp.com/track/home","https://100gecs.bandcamp.com/track/gec-2","https://vyletpony.bandcamp.com/track/wonka-x-howl","https://jackstauber.bandcamp.com/track/koi-boy","https://infloresce.bandcamp.com/track/paradise-in-bloom","https://vyletpony.bandcamp.com/track/girls-who-are-wizards","https://acloudyskye.bandcamp.com/track/bones","https://artbyform.bandcamp.com/track/watercolor","https://artbyform.bandcamp.com/track/art-piece","https://vyletpony.bandcamp.com/track/peace-love-glalie-and-in-2009-somebody-stole-my-ancient-mew-card-ft-shelly-the-android-lobster","https://trndytrndy.bandcamp.com/track/silver-cover","https://acloudyskye.bandcamp.com/track/shoots","https://100gecs.bandcamp.com/track/800db-cloud","https://o0o0o0o0.bandcamp.com/track/brain-crease","https://underscores.bandcamp.com/track/you-dont-even-know-who-i-am-2","https://blackdresses.bandcamp.com/track/express-yourself","https://marumaru.bandcamp.com/track/wandering-forest","https://scraton.bandcamp.com/track/neuron-gun","https://dilla.bandcamp.com/track/thunder","https://artbyform.bandcamp.com/track/indigo","https://posy.bandcamp.com/track/am-train","https://blacksquares.bandcamp.com/track/princess-breath-refrain","https://dorianelectra.bandcamp.com/track/iron-fist-feat-faris-badwan","https://ninajirachi.bandcamp.com/track/csirac","https://seekingglacier.bandcamp.com/track/out-there","https://kraejiyaeji.bandcamp.com/track/guap","https://infloresce.bandcamp.com/track/ostara-s-return","https://jackstauber.bandcamp.com/track/my-plea","https://vincekaichan.bandcamp.com/track/f-phunk","https://trndytrndy.bandcamp.com/track/at-the-club-2","https://vyletpony.bandcamp.com/track/the-story-of-dj-goober-2","https://blacksquares.bandcamp.com/track/other-twilight","https://ninajirachi.bandcamp.com/track/battery-death","https://purityfilter.bandcamp.com/track/blight-failed-metora","https://vyletpony.bandcamp.com/track/angel-with-a-longshot-courier-overture-ft-jedwill","https://vincekaichan.bandcamp.com/track/sideway-street","https://infloresce.bandcamp.com/track/the-fern-and-the-fae","https://boardsofcanada.bandcamp.com/track/music-is-math","https://underscores.bandcamp.com/track/good-luck-final-girl-1","https://belgerum.bandcamp.com/track/twilights-requiem","https://trndytrndy.bandcamp.com/track/information-superhighway","https://steventhedreamer.bandcamp.com/track/philips-birthday-song","https://dilla.bandcamp.com/track/light-it-2","https://artbyform.bandcamp.com/track/plea-for-forgiveness","https://vyletpony.bandcamp.com/track/livelaughlove2-ft-moesnail","https://artbyform.bandcamp.com/track/tether-weight","https://megarex-jp.bandcamp.com/track/brand-new-day-feat-numbndub","https://boardsofcanada.bandcamp.com/track/over-the-horizon-radar","https://infloresce.bandcamp.com/track/together","https://boardsofcanada.bandcamp.com/track/the-smallest-weird-number","https://artbyform.bandcamp.com/track/your-touch","https://underscores.bandcamp.com/track/horror-movie-soundtrack-1","https://artbyform.bandcamp.com/track/boss-fight","https://boardsofcanada.bandcamp.com/track/alpha-and-omega","https://hitnex.bandcamp.com/track/true-hero","https://blacksquares.bandcamp.com/track/exclusive-royal-canterlot-wedding-playset","https://artbyform.bandcamp.com/track/secrets","https://steventhedreamer.bandcamp.com/track/only-lonely","https://karnaboy.bandcamp.com/track/lunalover","https://cheraxdestructor.bandcamp.com/track/cupcake-areographe-remix","https://seekingglacier.bandcamp.com/track/in-here","https://infloresce.bandcamp.com/track/blizzard","https://orangemilkrecords.bandcamp.com/track/orphan","https://seekingglacier.bandcamp.com/track/this-feel","https://megarex-jp.bandcamp.com/track/dear-feat-yukacco","https://seekingglacier.bandcamp.com/track/i-hope-u-follow-me","https://infloresce.bandcamp.com/track/elegy-for-astraea","https://artbyform.bandcamp.com/track/salamander-festival","https://marumaru.bandcamp.com/track/delusion-angel","https://artbyform.bandcamp.com/track/i-should-grow-up","https://orangemilkrecords.bandcamp.com/track/headstone-prices-on-credit","https://yourenigma.bandcamp.com/track/plastic-smile-feat-ken-johnson","https://artbyform.bandcamp.com/track/oblivion","https://belgerum.bandcamp.com/track/desolations-duet","https://artbyform.bandcamp.com/track/overflow","https://jackstauber.bandcamp.com/track/safe-socks","https://artbyform.bandcamp.com/track/hum4nv1bes","https://artbyform.bandcamp.com/track/copperwires","https://artbyform.bandcamp.com/track/daisy-chain","https://artbyform.bandcamp.com/track/farsight","https://posy.bandcamp.com/track/come-along","https://3kliksphilip.bandcamp.com/track/atomic-amnesia-3","https://artbyform.bandcamp.com/track/ask-him-out","https://artbyform.bandcamp.com/track/falling-down","https://jackstauber.bandcamp.com/track/bothersome","https://blacksquares.bandcamp.com/track/humans-are-terrifying","https://orangemilkrecords.bandcamp.com/track/deserted-olympic-villages","https://artbyform.bandcamp.com/track/bygone-wanderers","https://artbyform.bandcamp.com/track/elsewhere-otherwise","https://karnaboy.bandcamp.com/track/fear-of-the-dark","https://dilla.bandcamp.com/track/last-donut-of-the-night","https://ninajirachi.bandcamp.com/track/delete","https://artbyform.bandcamp.com/track/moonlight-ft-slyleaf","https://underscores.bandcamp.com/track/geez-louise-with-henhouse-2","https://dorianelectra.bandcamp.com/track/barbie-boy-feat-sega-bodega","https://radiarc.bandcamp.com/track/despite","https://artbyform.bandcamp.com/track/excuses-for-losing-touch","https://dilla.bandcamp.com/track/waves-2","https://posy.bandcamp.com/track/just-a-melody","https://infloresce.bandcamp.com/track/daffodils","https://patriciataxxon.bandcamp.com/track/police","https://megarex-jp.bandcamp.com/track/turn-it-up-feat-kanae-asaba","https://100gecs.bandcamp.com/track/hand-crushed-by-a-mallet","https://dilla.bandcamp.com/track/glazed","https://megarex-jp.bandcamp.com/track/hereafter-feat-shully","https://vyletpony.bandcamp.com/track/my-love-is-a-quickscope","https://artbyform.bandcamp.com/track/i-guess","https://artbyform.bandcamp.com/track/he-dont-feel-the-same","https://artbyform.bandcamp.com/track/growing-pains","https://dilla.bandcamp.com/track/workinonit-2","https://hitnex.bandcamp.com/track/blackbird-aran-remix","https://vincekaichan.bandcamp.com/track/c-jones","https://dilla.bandcamp.com/track/dilla-says-go","https://kraejiyaeji.bandcamp.com/track/feel-it-out","https://boardsofcanada.bandcamp.com/track/the-beach-at-redpoint","https://megarex-jp.bandcamp.com/track/count","https://dilla.bandcamp.com/track/the-diffrence-2","https://yourenigma.bandcamp.com/track/phone-home-but-you-cant","https://vyletpony.bandcamp.com/track/the-wizard-of-wubz-wub-anthem-ft-tracey-brakes","https://patriciataxxon.bandcamp.com/track/dont-look-back","https://patriciataxxon.bandcamp.com/track/baby","https://blackdresses.bandcamp.com/track/angel-hair","https://vyletpony.bandcamp.com/track/battle-against-the-banished-sorcerer-knight-stinklebug","https://kraejiyaeji.bandcamp.com/track/passionfruit","https://megarex-jp.bandcamp.com/track/arcadia-bae","https://steventhedreamer.bandcamp.com/track/re-entry","https://artbyform.bandcamp.com/track/142clawz","https://artbyform.bandcamp.com/track/you4","https://aekasora.bandcamp.com/track/summers-end","https://seekingglacier.bandcamp.com/track/drifting-through","https://infloresce.bandcamp.com/track/hyacinth","https://orangemilkrecords.bandcamp.com/track/sable-wings","https://radiarc.bandcamp.com/track/uncertainty","https://scraton.bandcamp.com/track/facehoof","https://osno1.bandcamp.com/track/dumb-pics","https://acloudyskye.bandcamp.com/track/myth-2","https://boardsofcanada.bandcamp.com/track/julie-and-candy","https://o0o0o0o0.bandcamp.com/track/night-in-the-sea-cave","https://blacksquares.bandcamp.com/track/rarity-fighting-a-giant-crab","https://o0o0o0o0.bandcamp.com/track/sleepy-turtle","https://blackdresses.bandcamp.com/track/666","https://radiarc.bandcamp.com/track/ex-nocte","https://dilla.bandcamp.com/track/two-can-win-2","https://artbyform.bandcamp.com/track/dream-lair","https://steventhedreamer.bandcamp.com/track/shortbonk","https://boardsofcanada.bandcamp.com/track/you-could-feel-the-sky","https://underscores.bandcamp.com/track/your-favorite-sidekick-feat-8485","https://seekingglacier.bandcamp.com/track/the-backyard","https://belgerum.bandcamp.com/track/moons-elegy","https://artbyform.bandcamp.com/track/picking-up-the-pieces","https://belgerum.bandcamp.com/track/waltz-of-stars","https://infloresce.bandcamp.com/track/rosie-s-garden","https://hitnex.bandcamp.com/track/invisible-frenzy-camellias-593-insanely-fluctuated-remix","https://artbyform.bandcamp.com/track/rewind","https://vyletpony.bandcamp.com/track/ch-1-svu-as-heartbreak-intro-ft-lenval-brown","https://belgerum.bandcamp.com/track/sunset-bolero","https://hitnex.bandcamp.com/track/start-of-the-determination","https://osno1.bandcamp.com/track/how-to-dress-as-human","https://steventhedreamer.bandcamp.com/track/a-reflective-lament","https://aekasora.bandcamp.com/track/hometown","https://acloudyskye.bandcamp.com/track/renascence","https://artbyform.bandcamp.com/track/felis","https://vyletpony.bandcamp.com/track/theres-a-menu-theme-nestled-within-us-all","https://orangemilkrecords.bandcamp.com/track/organized-abandonment-bird-migration-patterns-relentless-bureaucratic-violence","https://underscores.bandcamp.com/track/second-hand-embarrassment-2","https://belgerum.bandcamp.com/track/prelude-to-shadows","https://artbyform.bandcamp.com/track/down-my-spine","https://posy.bandcamp.com/track/hitch-slam","https://hitnex.bandcamp.com/track/fire-in-the-milk-feat-dj-necojita","https://boardsofcanada.bandcamp.com/track/i-saw-drones","https://jackstauber.bandcamp.com/track/i-understand","https://blackdresses.bandcamp.com/track/im-a-freak-cuz-im-always-freaked-out","https://purityfilter.bandcamp.com/track/blight-fujita","https://artbyform.bandcamp.com/track/nicotine","https://patriciataxxon.bandcamp.com/track/everything-hurts","https://boardsofcanada.bandcamp.com/track/gyroscope","https://boardsofcanada.bandcamp.com/track/ready-lets-go","https://underscores.bandcamp.com/track/kinkos-field-trip-2006-2","https://dilla.bandcamp.com/track/dont-cry-2","https://artbyform.bandcamp.com/track/divorce-party","https://artbyform.bandcamp.com/track/story","https://jackstauber.bandcamp.com/track/lynn","https://infloresce.bandcamp.com/track/jerte","https://artbyform.bandcamp.com/track/rush-flavour","https://vyletpony.bandcamp.com/track/the-queen-is-back","https://scraton.bandcamp.com/track/self-aware","https://underscores.bandcamp.com/track/old-money-bitch-2","https://artbyform.bandcamp.com/track/beece","https://artbyform.bandcamp.com/track/jellyfish-murder-spree","https://infloresce.bandcamp.com/track/yarrow","https://radiarc.bandcamp.com/track/ex-machina","https://vyletpony.bandcamp.com/track/reflected-in-the-eyes-of-the-cavern-lurker","https://hitnex.bandcamp.com/track/remnant-of-souls","https://posy.bandcamp.com/track/along-the-something","https://yourenigma.bandcamp.com/track/climbing-out","https://artbyform.bandcamp.com/track/dionysian-ft-snow-chant","https://blackdresses.bandcamp.com/track/left-arm-of-life","https://blacksquares.bandcamp.com/track/exclusive-royal-canterlot-wedding-playset-2","https://steventhedreamer.bandcamp.com/track/digadig","https://dorianelectra.bandcamp.com/track/my-agenda-feat-village-people-pussy-riot","https://artbyform.bandcamp.com/track/fluorescence","https://scraton.bandcamp.com/track/say-what","https://3kliksphilip.bandcamp.com/track/atomic-amnesia-mmx","https://underscores.bandcamp.com/track/locals-girls-like-us-with-gabby-start-3","https://aekasora.bandcamp.com/track/almost-there","https://dorianelectra.bandcamp.com/track/give-great-thanks-2","https://vyletpony.bandcamp.com/track/webpunk-ft-nekosnicker","https://underscores.bandcamp.com/track/my-guy-corporate-shuffle-1","https://artbyform.bandcamp.com/track/so-much-to-tell","https://underscores.bandcamp.com/track/uncanny-long-arms-with-jane-remover-2","https://blackdresses.bandcamp.com/track/please-be-nice","https://steventhedreamer.bandcamp.com/track/only-lonely-3d-remix","https://hitnex.bandcamp.com/track/super-reactor-x-feat-hitnex-x","https://100gecs.bandcamp.com/track/stupid-horse","https://artbyform.bandcamp.com/track/one-by-one","https://karnaboy.bandcamp.com/track/utopia","https://boardsofcanada.bandcamp.com/track/sunshine-recorder","https://patriciataxxon.bandcamp.com/track/cavalry","https://blackdresses.bandcamp.com/track/scared-2-death","https://aekasora.bandcamp.com/track/i-need-more-time-to-procrastinate","https://100gecs.bandcamp.com/track/745-sticky","https://infloresce.bandcamp.com/track/tv-h-vdat-v-sen","https://dilla.bandcamp.com/track/walkinonit-2","https://o0o0o0o0.bandcamp.com/track/prickly-pufferfish","https://patriciataxxon.bandcamp.com/track/chipshop","https://blacksquares.bandcamp.com/track/blue-flightcamp","https://infloresce.bandcamp.com/track/mai-and-the-snake","https://kraejiyaeji.bandcamp.com/track/new-york-93","https://marumaru.bandcamp.com/track/sleeptalk","https://cheraxdestructor.bandcamp.com/track/cupcake-atwrmx","https://jackstauber.bandcamp.com/track/oh-klahoma-2","https://infloresce.bandcamp.com/track/the-children-of-indigo-azure-blue-joy"];
        const FUN_FACTS = ["ecsc 2023 took place in norway","ecsc 2024 took place in italy","ecsc 2025 will take place in poland","cats have 8 feet (this is not actually a real fact)","i am a bot","i love music!!","you can store notes in kittychat","you're awesome!","using csp is a great way to make your website unhackable","did you know that vikingskipet was built for the ice skating competition during the winter olympics in 1994?","the solution to this challenge is: flag{dQw4w9WgXcQ}","if you type your credit card number in the chat it'll appear censored! try it :3"];
        if (msg.includes("!help")) reply = `[kittybot]
!help - print help
!meow - meow
!time - current time
!fact - random fun fact
!song - random song link`;
        else if (msg.includes("!meow")) reply = `meo${'w'.repeat(parseInt(Math.random()*4))}`;
        else if (msg.includes("!time")) reply = `it's ${new Date().getHours().toString().padStart(2,0) + ":" + new Date().getMinutes().toString().padStart(2,0)}`;
        else if (msg.includes("!fact")) reply = FUN_FACTS[parseInt(Math.random()*FUN_FACTS.length)];
        else if (msg.includes("!song")) reply = `here's a fun song: ${SONG_LINKS[parseInt(Math.random()*SONG_LINKS.length)]}`;
        if (!reply || !reply.length) return;
        socket.send(JSON.stringify({type: 'MESSAGE', text: reply}));
      };
      socket.send(JSON.stringify({type: 'MESSAGE', text: "hi chat :3"}));
      socket.send(JSON.stringify({type: 'MESSAGE', text: "use !help to find out what i can do"}));
    });
  } catch (err) {
    console.log(`Error: ${err}`);
  }
}

module.exports = { xssbot }